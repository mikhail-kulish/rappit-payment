swagger: "2.0"
info:
  title: rappit simple payment form
  version: "1.0.2"
  description: |-
    Simple payment form service. Requires merchant to submit Order and use payment form URL generated by **rappit** payment service.
    Create Order operation will return created Order which can be used as a payment form link.
    Possible use cases are:
    1. Send generated link to customer.
    2. Use generated link as HTML iframe source (iframe src) on checkout page.
    3. Redirect customer to fully featured payment form to enter credit card details.
    4. Generate QR code

    Payment form link can be generated as:
    https://rappitpay.com/pay/{orderId} - where {orderId} is created Order ID returned in response of *Create Order* operation
  termsOfService: https://rappitpay.com/terminos_de_servicio
  contact:
    url: https://rappitpay.com/
host: "rappit.io"
consumes:
  - "application/json"
produces:
  - "application/json"
schemes:
  - "https"
paths:
  "/payment/v1/merchant/order":
    post:
      description: Create order in **rappit** platform for further payment operations. Order is the main entry of payment flow.
      operationId: "createOrder"
      produces:
        - "application/json"
      responses:
        200:
          description: "Order created"
          schema:
            $ref: "#/definitions/order"
      parameters:
        - description: "Order form"
          in: body
          name: orderForm
          required: true
          schema:
            $ref: "#/definitions/orderForm"
      security:
        - api_key: []
      summary: Create Order

securityDefinitions:
  api_key:
    type: "apiKey"
    name: "x-rappit-merchant-apikey"
    in: "header"

definitions:
  order:
    type: "object"
    properties:
      id:
        type: integer
      merchant:
        type: integer
      reference:
        type: string
      amount:
        $ref: "#/definitions/money"
      description:
        type: string
  orderForm:
    type: object
    required:
      - reference
      - description
      - items
    properties:
      merchant:
        type: integer
      reference:
        type: "string"
      description:
        type: string
      items:
        type: array
        items:
          $ref: "#/definitions/orderItem"
      payer:
        $ref: "#/definitions/payer"

  orderItem:
    type: object
    required:
      - price
      - quantity
      - description
    properties:
      price:
        $ref: "#/definitions/money"
      quantity:
        type: integer
      description:
        type: string
      sku:
        type: string
      tax:
        $ref: "#/definitions/money"
  money:
    type: object
    required:
      - value
      - currency
    properties:
      value:
        type: number
      currency:
        type: string
  payer:
    type: object
    required:
      - email
      - name
    properties:
      email:
        type: string
      name:
        $ref: "#/definitions/name"
      billing:
        $ref: "#/definitions/location"
  name:
    type: object
    required:
      - first
      - last
    properties:
      first:
        type: string
      last:
        type: string
  location:
    type: object
    required:
      - address
      - city
      - country
    properties:
      address:
        type: string
      additional:
        type: string
      city:
        type: string
      state:
        type: string
      postal:
        type: string
      country:
        type: string
        minLength: 2
        maxLength: 2
        description: "2 letters country ISO code"
